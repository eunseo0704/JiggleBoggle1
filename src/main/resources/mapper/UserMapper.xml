<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.jiggleboggle1.mapper.UserMapper">

    <insert id="setSignUp" parameterType="com.spring.jiggleboggle1.domain.UserVO">
        INSERT INTO USER_MASTER (
            USER_ID,
            USER_NAME,
            USER_PSWD,
            USER_MAIL,
            JOIN_DATE,
            USER_ROLE,
            USER_STATUS
        ) VALUES (#{userId},
                  #{userName},
                  #{userPswd},
                  #{userMail},
                  NOW(),
                  'U',
                  'Y'
                 )
    </insert>

    <!-- 회원 조회 SELECT -->
    <select id="findByUserId" parameterType="string" resultType="com.spring.jiggleboggle1.domain.UserVO">
        SELECT USER_ID, USER_NAME, USER_PSWD, USER_MAIL, JOIN_DATE
        FROM USER_MASTER
        WHERE USER_ID = #{userId}
    </select>

    <select id="findByEmail" parameterType="string" resultType="com.spring.jiggleboggle1.domain.UserVO">
        SELECT *
        FROM users
        WHERE email = #{email}
    </select>

    <insert id="insertGoogleUser" parameterType="com.spring.jiggleboggle1.domain.UserVO" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO USER_MASTER (
            USER_NAME,
            USER_MAIL,
            JOIN_DATE,
            USER_ROLE,
            USER_STATUS,
            LOGIN_TYPE
        ) VALUES (
                  #{userName},
                  #{userMail},
                  NOW(),
                  'USER',
                  'Y',
                  #{loginType}
                 )
    </insert>

</mapper>